# FC Multi-Timeframe Cloning Test
# The futures_continuation node gets global timeframe (1D).
# The market_data_source at 5Min introduces a second timeframe.
# The compiler should auto-clone the FC node to 5Min.

# Futures continuation — inherits global_timeframe = 1D
fc = futures_continuation(s_rollover_method="FirstOfMonth", s_adjustment_method="BackwardPanamaCanal")()
daily_close = fc.c

# Intraday data source at 5Min — introduces second timeframe
src_5m = market_data_source(timeframe=5Min)()
intraday_close = src_5m.c

# Simple indicators on each timeframe
daily_sma = sma(period=20)(daily_close)
intraday_sma = sma(period=20)(intraday_close)

# Reports to make it a valid study
cards(
    layout=CardLayout(
        title='Daily SMA',
        cells=[
            ColumnSpec(title='Daily SMA', card_agg=AggregationType.Last, type=CardRenderType.DecimalFormat, dp=2, card_slot=CardSlot.Hero)
        ]
    ),
    category='Daily'
)(daily_sma)

cards(
    layout=CardLayout(
        title='5Min SMA',
        cells=[
            ColumnSpec(title='5Min SMA', card_agg=AggregationType.Last, type=CardRenderType.DecimalFormat, dp=2, card_slot=CardSlot.Hero)
        ]
    ),
    category='Intraday'
)(intraday_sma)
